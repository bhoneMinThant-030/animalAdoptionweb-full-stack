<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AdoptHub • All Animals</title>
    <link rel="stylesheet" href="./css/style.css" />
    <link rel="stylesheet" href="./css/modal-form.css" />
    <script src="./js/animals.js" defer></script>
  </head>

  <body class="page-animals">
    <!-- NAV -->
    <header class="nav">
      <div class="container nav__inner">
        <a class="brand" href="./animals.html" aria-label="AdoptHub home">
          <img class="brand__mark" src="images/logo.png"></img>
          <span class="brand__name">AdoptHub</span>
        </a>

        <nav class="nav__links" aria-label="Primary">
          <a class="nav__link is-active" href="./animals.html">All Animals</a>
          <button id="addAnimalBtn" type="button" class="btn btn--primary btn--pill" onclick="openAddAnimalDialog()">
            + Add Animal
          </button>

          <span id="navUser" class="nav__link" style="display:none;"></span>

          <button type="button" id="btnLogin" class="btn btn--ghost btn--pill" onclick="openAuthDialog()">
            Login
          </button>

          <button type="button" id="btnLogout" class="btn btn--ghost btn--pill" style="display:none;" onclick="logout()">
            Logout
          </button>
        </nav>
      </div>
    </header>

    <!-- HERO -->
    <section class="hero">
      <div class="container hero__inner">
          <h1 class="hero__title">Find your new best friend</h1>
          <p class="hero__subtitle">Browse available animals</p>
      </div>
    </section>

    <div id="flash" role="alert" aria-live="polite"
     style="display:none; margin:12px auto; max-width:1100px; padding:12px 16px; border-radius:12px; background:#fff3cd;">
    </div>

    <!-- CONTENT -->
    <main class="content">
      <div class="container">
        <p class="meta" id="resultsCount">Showing 0 of 0 animals</p>

        <section class="grid" aria-label="Animal cards" id="animalsGrid">
          <!-- JS will render cards here -->
        </section>
      </div>
    </main>
    <div id="deleteOverlay" class="overlay" style="display: none;">
        <div class="overlay__content">
            <h3>Confirm Delete</h3>
            <p>Are you sure you want to delete this animal? This action cannot be undone.</p>
            <div class="overlay__buttons">
                <button type="button" class="btn btn--cancel" onclick="closeDeleteOverlay()">Cancel</button>
                <button type="button" class="btn btn--delete" onclick="confirmDelete()">Delete</button>
            </div>
        </div>
    </div>
    <dialog id="addAnimalDialog" class="modal">
      <div class="modal__panel card">
        <!-- Header -->
        <div class="modal__header">
          <div class="modal__headerRow">
            <div>
              <h2 class="modal__title">Add New Animal</h2>
              <p class="modal__subtitle">Fill in the details below.</p>
            </div>

            <button
              type="button"
              class="btn btn--ghost modal__close"
              onclick="document.getElementById('addAnimalDialog').close()"
              aria-label="Close"
            >
              ×
            </button>
          </div>
        </div>

        <!-- Form -->
        <form
          id="addAnimalForm"
          class="modal__body"
          enctype="multipart/form-data"
          onsubmit="addAnimalData(event)"
        >
          <div class="modal__grid">
            <!-- Name -->
            <div class="modal__full">
              <label class="modal__label">ANIMAL NAME</label>
              <input name="name" class="field__control" placeholder="e.g., Luna" required />
            </div>

            <!-- Species -->
            <div>
              <label class="modal__label">SPECIES</label>
              <input name="species" class="field__control" placeholder="e.g., Dog" required />
            </div>

            <!-- Breed -->
            <div>
              <label class="modal__label">BREED</label>
              <input name="breed" class="field__control" placeholder="e.g., Golden Retriever" required />
            </div>

            <!-- Gender -->
            <div>
              <label class="modal__label">GENDER</label>
              <select name="gender" class="field__control">
                <option value="Unknown" selected>Unknown</option>
                <option value="Male">Male</option>
                <option value="Female">Female</option>
              </select>
            </div>

            <!-- Age -->
            <div>
              <label class="modal__label">AGE (MONTHS)</label>
              <input name="age_months" type="number" min="1" class="field__control" placeholder="e.g., 18" required />
            </div>

            <!-- Status -->
            <div class="modal__full">
              <label class="modal__label">ADOPTION STATUS</label>
              <select name="status" class="field__control" required>
                <option value="Available" selected>Available</option>
                <option value="Reserved">Reserved</option>
                <option value="Adopted">Adopted</option>
              </select>
            </div>

            <!-- File -->
            <div class="modal__full">
              <label class="modal__label">IMAGE</label>
              <input type="file" name="image" accept="image/*" class="field__control modal__file" required />
            </div>

            <!-- Temperament -->
            <div class="modal__full">
              <label class="modal__label">PERSONALITY / TEMPERAMENT</label>
              <textarea
                name="temperament"
                class="field__control modal__textarea"
                rows="4"
                placeholder="Write a short description..."
                required
              ></textarea>
            </div>
          </div>

          <!-- Buttons -->
          <div class="modal__actions">
            <button
              type="button"
              class="btn btn--ghost btn--pill"
              onclick="document.getElementById('addAnimalDialog').close()"
            >
              Cancel
            </button>

            <button type="submit" class="btn btn--primary btn--pill">
              Add Animal
            </button>
          </div>
        </form>
      </div>
    </dialog>


    
    <dialog id="editAnimalDialog" class="modal">
      <div class="modal__panel card">
        <!-- Header -->
        <div class="modal__header">
          <div class="modal__headerRow">
            <div>
              <h2 class="modal__title">Edit Animal</h2>
              <p class="modal__subtitle">Update the details below.</p>
            </div>

            <button
              type="button"
              class="btn btn--ghost modal__close"
              onclick="document.getElementById('editAnimalDialog').close()"
              aria-label="Close"
            >
              ×
            </button>
          </div>
        </div>

        <!-- Form -->
        <form
          id="editAnimalForm"
          class="modal__body"
          enctype="multipart/form-data"
          onsubmit="submitEditAnimal(event)"
        >
          <input type="hidden" name="animal_id" id="edit_animal_id" />

          <div class="modal__grid">
            <!-- Name -->
            <div class="modal__full">
              <label class="modal__label">ANIMAL NAME</label>
              <input name="name" id="edit_name" class="field__control" required />
            </div>

            <!-- Species -->
            <div>
              <label class="modal__label">SPECIES</label>
              <input name="species" id="edit_species" class="field__control" required />
            </div>

            <!-- Breed -->
            <div>
              <label class="modal__label">BREED</label>
              <input name="breed" id="edit_breed" class="field__control" required />
            </div>

            <!-- Gender -->
            <div>
              <label class="modal__label">GENDER</label>
              <select name="gender" id="edit_gender" class="field__control">
                <option value="Unknown">Unknown</option>
                <option value="Male">Male</option>
                <option value="Female">Female</option>
              </select>
            </div>

            <!-- Age -->
            <div>
              <label class="modal__label">AGE (MONTHS)</label>
              <input
                name="age_months"
                id="edit_age_months"
                type="number"
                min="0"
                class="field__control"
                required
              />
            </div>

            <!-- Status -->
            <div class="modal__full">
              <label class="modal__label">ADOPTION STATUS</label>
              <select name="status" id="edit_status" class="field__control" required>
                <option value="Available">Available</option>
                <option value="Reserved">Reserved</option>
                <option value="Adopted">Adopted</option>
              </select>
            </div>

            <!-- File -->
            <div class="modal__full">
              <label class="modal__label">NEW IMAGE (OPTIONAL)</label>
              <input
                name="image"
                id="edit_image"
                type="file"
                accept="image/*"
                class="field__control modal__file"
              />
              <div class="modal__hint">Leave empty to keep the current image.</div>
            </div>

            <!-- Temperament -->
            <div class="modal__full">
              <label class="modal__label">PERSONALITY / TEMPERAMENT</label>
              <textarea
                name="temperament"
                id="edit_temperament"
                class="field__control modal__textarea"
                rows="4"
                required
              ></textarea>
            </div>
          </div>

          <!-- Buttons -->
          <div class="modal__actions">
            <button
              type="button"
              class="btn btn--ghost btn--pill"
              onclick="document.getElementById('editAnimalDialog').close()"
            >
              Cancel
            </button>

            <button type="submit" class="btn btn--primary btn--pill">
              Save Changes
            </button>
          </div>
        </form>
      </div>
    </dialog>
    <dialog id="authDialog" class="modal">
      <div class="modal__panel card">
        <div class="modal__header">
          <div class="modal__headerRow">
            <div>
              <h2 class="modal__title" id="authMsg">Admin login</h2>
            </div>
            <button type="button" class="btn btn--ghost modal__close"
              onclick="document.getElementById('authDialog').close()" aria-label="Close">×</button>
          </div>
        </div>

        <div class="modal__body">
          <!-- LOGIN -->
          <form onsubmit="login(event)">
            <label class="modal__label">EMAIL</label>
            <input id="loginEmail" class="field__control" required />

            <label class="modal__label" style="margin-top:12px;">PASSWORD</label>
            <input id="loginPassword" type="password" class="field__control" required />

            <div class="modal__actions">
              <button type="submit" class="btn btn--primary btn--pill">Login</button>
            </div>
          </form>
        </div>
      </div>
    </dialog>
    <!-- Admin Access Modal -->
    <dialog id="adminAccessDialog" class="modal">
      <div class="modal__panel card">
        <div class="modal__header">
          <div class="modal__headerRow">
            <h2 class="modal__title">Admin Access Required</h2>
          </div>
        </div>

        <div class="modal__body">
          <div class="modal__actions">
            <button
              type="button"
              class="btn btn--primary btn--pill"
              onclick="closeAdminAccessDialog()"
            >
              OK
            </button>
          </div>
        </div>
      </div>
    </dialog>
    <footer class="footer">
      <div class="container footer__inner">
        <span>© AdoptHub</span>
      </div>
    </footer>

    
  </body>
</html>
